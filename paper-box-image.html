<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-box/paper-box.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-toolbar/paper-toolbar.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">

<!--
### paper-box-file
`<paper-box-file>` is a material design box.
    <paper-box-file ></paper-box-file>

@demo demo/index.html
-->


<dom-module id="paper-box-image">
  <template>
    <custom-style>
      </custom-style>
    <style>
      :host {

      }
    </style>
    <paper-dialog id="changeImage" class="registrati-dati fit layout vertical center-justified" entry-animation="scale-up-animation" exit-animation="fade-out-animation" with-backdrop>
      <paper-icon-button style="position:absolute;top:0px;bottom:0px;right:0px" botton-tap="close" class="top" icon="icons:close" on-tap="dismissChange" dialog-dismiss></paper-icon-button>

      <div class="self-center">
        <div id="containerChangeCropper" class="cropperCDBox" style="margin:0 auto ;min-width: 350px; min-height:350px;background-color:white;position:relative">

        </div>

        <paper-toolbar class="medium head-codice actions" justify="justified">
          <div class="top">
            <paper-button toggle class="actions " style="height:30px;width:160px;margin-left:18px;border-radius:0px 0px 0px 0px" id="upImage" on-tap="uploadNewImage"> Carica immagine </paper-button>
          </div>
          <div class="top">o</div>
          <div class="top">
            <paper-button toggle class="actions  modify" style="height:30px;width:30px;border-radius:0px 0px 0px 0px" id="modImage" on-tap="changeImage">Modifica</paper-button>
          </div>
        </paper-toolbar>
      </div>
    </paper-dialog>

    <paper-dialog id="cropperResultDialog" class="registrati-dati fit layout vertical center-justified" entry-animation="scale-up-animation" exit-animation="fade-out-animation" with-backdrop>

      <div class="self-center">
        <img id="cropperResultImage"></img>
      </div>
    </paper-dialog>

    <paper-dialog id="dropZoneDialog" class="registrati-dati fit layout vertical center-justified" entry-animation="scale-up-animation" exit-animation="fade-out-animation" with-backdrop>

      <div class="self-center">
        <paper-icon-button style="position:absolute;top:0px;bottom:0px;right:0px" botton-tap="close" class="top" icon="icons:close" on-tap="dismissDropzone" dialog-dismiss></paper-icon-button>
        <div class="area droppable">
          <div id="dropZone">Drop files here or Click to upload</div>
        </div>
      </div>
    </paper-dialog>
    <form id="formProfileImage" accept-charset="utf-8" enctype="multipart/form-data" style="display:none;visible:invisible;" method="POST" action="http://localhost:8081/upload/upload_image">
      <input type="file" name="file" id="file">

    </form>
    <paper-box id="paperBox" text="{{_text}}" src="{{srcIcon}}" on-click="paperClick"></paper-box>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'paper-box-image',

    /**
     * Fired when the user clicks on a place in the Google Map place list.
     *
     * @event place-clicked
     */

    properties: {
      _selected:{
        type: Boolean,
        value:false,
        notify:true
      },

      _text:{
        type: String,
        value:"",
        notify:true
      },
      text:{
        type: String,
        value:"",
        notify:true
      },
      textModify:{
        type:String,
        value:"Modifica",
        notify:true
      }
      srcIcon:{
        type:String,
        value:"",
        notify:true
      },
      originalImageWidth:{
        type:Number,
        value:0,
        notify:true
      },
      originalImageHeight:{
        type:Number,
        value:0,
        notify:true
      },
      croppedImageWidth:{
        type:Number,
        value:0,
        notify:true
      },
      croppedImageHeight:{
        type:Number,
        value:0,
        notify:true
      },
      croppedImage:{
        type:Object,
        value: null,
        notify:true
      },
      originalImage:{
        type:Object,
        value: null,
        notify:true
      },
      selectedImage:{
        type:Boolean,
        value: false,
        notify: true
      }
    },
    paperClick:function(){

    },
    choiceUploadOrEdit:function(){
      if (this.selectedImage == true){
        // if image is avaiable.
        $(this.$.paperBox).mouseenter(function() {
          this._text = this.textModify;
        }).mouseleave(function() {
          this._text = this.text;
        });
        // hide paperbox icon.
        this.$.paperBox.hideIcon();

      }else{

        this.$.paperBox.showIcon();
      }
    }


  });
</script>
